<!DOCTYPE html>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58919029-1', 'auto');
  ga('send', 'pageview');

</script>

<html>

<head>
  <meta content="text/html; charset=utf-8" http-equiv="content-type">
  <meta name="robots" content="follow" />
  
  <title>
    MK Dynamics - Computer Security - Basic Linux Exploits
  </title>
  
  <link href="../../css/styles.css" type = "text/css" rel = "stylesheet" />
  
  <style>
    .content {
	overflow: auto;
	height: 80%; 
	background: url("../../images/saturn.jpg") no-repeat center center fixed;
	background-size: cover;
	background-position: center;
	padding: 10px;
	margin: 10px;
	border: 5px solid black;
      }
      
    h1, h2, h3, h4 {
      color: white;
      display: block;     
    }
    
    .current_project_1 {
      border		: 5px solid black;
      background	: gray;
      position		: relative;
      width		: 900px;
      height		: 200px;
      top		: 0px;
      left		: 0px;
      float		: left;
      margin		: 10px;
      padding-left	: 10px;
    }
    
    .current_project_2 {
      border		: 5px solid black;
      background	: gray;
      position		: relative;
      width		: 900px;
      height		: 3000px;
      top		: 000px;
      left		: 0px;
      float		: left;
      margin		: 10px;
      padding-left	: 10px;
    }
    
    .current_project_3 {
      border		: 5px solid black;
      background	: gray;
      position		: relative;
      width		: 900px;
      height		: 3100px;
      top		: 000px;
      left		: 0px;
      float		: left;
      margin		: 10px;
      padding-left	: 10px;
    }
    
    .current_project_4 {
      border		: 5px solid black;
      background	: gray;
      position		: relative;
      width		: 900px;
      height		: 2700px;
      top		: 000px;
      left		: 0px;
      float		: left;
      margin		: 10px;
      padding		: 10px;
    }
    
    .current_project_5 {
      border		: 5px solid black;
      background	: gray;
      position		: relative;
      width		: 900px;
      height		: 3600px;
      top		: 000px;
      left		: 0px;
      float		: left;
      margin		: 10px;
      padding		: 10px;
    }
    
    .current_project_6 {
      border		: 5px solid black;
      background	: gray;
      position		: relative;
      width		: 900px;
      height		: 3100px;
      top		: 000px;
      left		: 0px;
      float		: left;
      margin		: 10px;
      padding		: 10px;
    }
    
    div .img {
      margin		: 0px;
      padding		: 10px;
      height		: auto;
      width		: auto;
      float		: left;
    }
    
    div .img img {
      display		: inline;
      margin		: 0px;
      padding		: 0px;
      float             : auto;
    }
    
    div .desc {
      color		: white;
      width		: 600px;
      margin		: 5px;
      padding		: 10px;
    }
  </style>
</head>

<body>
    <div class="wrapper">
    
        <header>
    
            <hgroup>
                <h1> 
                    <big> <big> MK Dynamics </big> </big>
                </h1>


                <h2>
                    Computer Security - Basic Linux Exploits
                </h2>
            </hgroup>
    

            <nav>
                <ul>
                    <li> <a href="../../index.html">Home</a> </li>
                    <li> <a href="computer_security.html">Back</a> </li>
                </ul>
            </nav>
  
            <hr />
    
        </header>
    
        <section class="content">
            
            <!-- ************************************************************************************** First Section Start ************ -->
            <section class="first_section">
        
                <div class="current_project_1">
                    
                    <hgroup>
                        <h3>
                            Introduction
                        </h3>
                    </hgroup>
                    

                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        
                        <p>
                            This section will borrow heavily from Gray Hat Hacking, The Ethical Hacker's Handbook, by Regaldo, et. al, McGraw Hill, 4th. Edition., as well as the classic discussion on Buffer Overflows by Aleph One.<br>
                            <a href="https://insecure.org/stf/smashstack.html">Aleph One's Classic on Buffer Overflows.</a>
                        </p>
                        
                        <p>
                            In this section, we will discuss trying to inject shellcode into a vulnerable program from the command line, investigate errors, and perform debugging of these errors with the Gnu DeBugger (GDB).
                        </p>
                    
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->

                </div> <!-- .current_project_1 -->
        
            </section> <!-- first_section -->
            <!-- ************************************************************************************** First Section End ************ -->
            
            <!-- *********************************************************************************** Second Section Start ************ -->
            <section class="second_section">
                
                <div class="current_project_2">
                
                    <hgroup>
                        <h3>
                            Smashing the Stack of a Vulnerable Program and Causing a Buffer Overflow
                        </h3>
                    </hgroup>
                    
                    <hgroup>
                        <h4>
                            Overflowing the Buffer of a Vulnerable Program From the Command Line
                        </h4>
                    </hgroup>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                    
                        <p>
                            The following image was taken from the following presentation:<br><br>
                            Stack-Based Buffer Overflows Attacker<br>
                            By: Laurence Davis<br>
                            <a href="https://slideplayer.com/slide/4775349/">Stack-Based Buffer Overflows</a>
                        </p>
                        
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                     <figure>
                        <div class="img">
                            <img 
                                src="images/Basic_Linux_exploits/buffer_overflow_image.jpeg"
                                width="800"
                                height="650"
                                title=""
                            >
                        </div> <!-- .img -->
                        <div class="desc">
                            Buffer overflow corrupting return address on the stack
                        </div> <!-- .desc -->
                    </figure>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            By overfilling the function's local variables with data, one is able to overwrite the saved EIP (return pointer in the figure).  This is a vulnerability in the way the kernel and C compiler handle function calls, because shellcode can be inserted onto the stack and the return address may be overwritten to point to the shellcode.  However, as seen in the section on Shellcoding, modern kernels will not allow execution of data on the stack.  So even though this vulnerability has been patched, we will still learn it because fundamentally, it is the basis for many such vulnerabilities, even in modern kernels.
                        </p>
                           
                        <p>
                            We will now investigate exploiting this vulnerability with a simple vulnerable C test program shown below.
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                    <iframe
                        src="code/Basic_Linux_exploits/meet.c.html" 
                        height="300" 
                        width="850">
                    </iframe>
                    
                    <div class="desc">
                            The vulnerable C program: meet.c
                    </div> <!-- .desc -->
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            <a href="code/Basic_Linux_exploits/meet.c">Click here to download meet.c</a>
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            As mentioned previously, modern Linux kernels use several strategies to overcome these vulnerabilities.  One of these strategies is known as Address Space Layout Randomization (ASLR).  Essentially, the kernel randomizes the process's address space, which includes the stack, thereby precluding the ability to brute force overwriting of the return address on the stack.  Every attempt will require injection of a new malicious address that points back to the shellcode, which is extremely difficult to guess.
                        </p>
                        
                        <p>
                            Another strategy is to simply not allow execution of data on the stack.  Since the shellcode resides entirely on the stack, execution of the shellcode will not be allowed by the kernel, and the process will crash.
                        </p>
                        
                        <p>
                            To get around such protections, for pedagogical reasons, we will disable both ASLR and allow execution of data on the stack.  This will require either recompiling the C program with executable stack or enabling executable stack at the kernel level.  In order to disable ASLR, a bash shell may be opened with the following command:<br><br>
                            
                            $ setarch i386 -R /bin/bash<br><br>
                            
                            or disabling ASLR at the kernel level.  To minimize variables, it is better to do this at the kernel level; however, this is not a good idea on your main system for security reasons.  Therefore, we will spin up a 32-bit Ubuntu machine and disable these protections at the kernel level, as shown in the image below:
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                    <figure>
                        <div class="img">
                            <img 
                                src="images/Basic_Linux_exploits/setting_up_32bit_vm.jpg"
                                width="750"
                                height="500"
                                title=""
                            >
                        </div> <!-- .img -->
                        <div class="desc">
                            Lorem
                        </div> <!-- .desc -->
                    </figure>
                
                </div> <!-- .current_project_2 -->
            
            </section> <!-- second_section -->
            <!-- ************************************************************************************* Second Section End ************ -->
        
            <!-- ************************************************************************************* Third Section Start *********** -->
            <section class="third_section">
        
                <div class="current_project_3">
            
                    <hgroup>
                        <h3>
                            Lorem
                        </h3>
                        
                        <h4>
                            Lorem
                        </h4>
                    </hgroup>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->

                    <figure>
                        <div class="img">
                            <img 
                            src="images/"
                            width="800"
                            height="650"
                            title=""
                            >
                        </div> <!-- .img -->
                        <div class="desc">
                            Lorem
                        </div> <!-- .desc -->
                    </figure>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            <a href="code/">Click here to download ***</a>
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                    <hgroup>
                        <h4>
                           Lorem
                        </h4>
                    </hgroup>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                    <figure>
                        <div class="img">
                            <img 
                            src="images/"
                            width="800"
                            height="600"
                            title=""
                            >
                        </div> <!-- .img -->
                        <div class="desc">
                            Lorem
                        </div> <!-- .desc -->
                    </figure>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                           Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                    <hgroup>
                        <h4>
                           Lorem
                        </h4>
                    </hgroup>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                    <figure>
                        <div class="img">
                            <img 
                            src="images/"
                            width="800"
                            height="700"
                            title=""
                            >
                        </div> <!-- .img -->
                        <div class="desc">
                            Lorem
                        </div> <!-- .desc -->
                    </figure>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                </div> <!-- .current_project_3 -->

            </section> <!-- third_section -->
            <!-- ************************************************************************************* Third Section End *********** -->
            
            <!-- ************************************************************************************* Fourth Section Start ******** -->
            <section class="fourth_section">
            
                <div class="current_project_4">
                    <hgroup>
                        <h3>
                            Lorem
                        </h3>
                        
                        <h4>
                            Lorem
                        </h4>
                    </hgroup>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->

                    <figure>
                        <div class="img">
                            <img 
                                src="images/"
                                width="800"
                                height="700"
                                title=""
                            >
                        </div> <!-- .img -->
                        
                        <div class="desc">
                            Lorem
                        </div> <!-- .desc -->
                    </figure>
                    
                    <hgroup>
                        <h4>
                            Lorem
                        </h4>
                    </hgroup>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                    <iframe
                        src="code/" 
                        height="450" 
                        width="800">
                    </iframe>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                    <hgroup>
                        <h4>
                            Lorem
                        </h4>
                    </hgroup>
                    
                    <figure>
                        <div class="img">
                            <img 
                                src="images/"
                                width="800"
                                height="350"
                                title=""
                            >
                        </div> <!-- .img -->
                        
                        <div class="desc">
                            Lorem
                        </div> <!-- .desc -->
                    </figure>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                </div> <!-- .current_project_4 -->
                
            </section> <!-- fourth_section -->
            <!-- ************************************************************************************* Fourth Section End ******** -->
            
            <!-- ************************************************************************************* Fifth Section Start ******* -->
            <section class="fifth_section">
        
                <div class="current_project_5">
                    
                    <hgroup>
                        <h3>
                            Lorem
                        </h3>
                        
                        <h4>
                            Lorem
                        </h4>
                    </hgroup>

                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                        
                        <iframe
                            src="code/" 
                            height="275" 
                            width="800">
                        </iframe>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                    <hgroup>
                        <h4>
                            Lorem
                        </h4>
                    </hgroup>
                    
                    <figure>
                        <div class="img">
                            <img 
                                src="images/"
                                width="800"
                                height="350"
                                title=""
                            >
                        </div> <!-- .img -->
                        
                        <div class="desc">
                            Lorem
                        </div> <!-- .desc -->
                    </figure>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                    <hgroup>
                        <h4>
                            Lorem
                        </h4>
                    </hgroup>
                    
                    <figure>
                        <div class="img">
                            <img 
                                src="images/"
                                width="800"
                                height="700"
                                title=""
                            >
                        </div> <!-- .img -->
                        
                        <div class="desc">
                            Lorem
                        </div> <!-- .desc -->
                    </figure>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->

                    <figure>
                        <div class="img">
                            <img 
                                src="images/"
                                width="800"
                                height="500"
                                title=""
                            >
                        </div> <!-- .img -->
                        
                        <div class="desc">
                            Lorem
                        </div> <!-- .desc -->
                    </figure>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                    <figure>
                        <div class="img">
                            <img 
                                src="images/"
                                width="800"
                                height="500"
                                title=""
                            >
                        </div> <!-- .img -->
                        
                        <div class="desc">
                            Lorem
                        </div> <!-- .desc -->
                    </figure>

                </div> <!-- .current_project_5 -->
        
            </section> <!-- fifth_section -->
            <!-- ************************************************************************************** Fifth Section End ************ -->
        

            <!-- ************************************************************************************** Sixth Section Start ********** -->
            <section class="sixth_section">
        
                <div class="current_project_6">
                    
                    <hgroup>
                        <h3>
                            Lorem
                        </h3>
                        
                        <h4>
                            Lorem
                    </hgroup>
                    

                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                        
                    <hgroup>
                        <h4>
                            Lorem
                        </h4>
                    </hgroup>
                    
                    <figure>
                        <div class="img">
                            <img 
                                src="images/"
                                width="800"
                                height="350"
                                title=""
                            >
                        </div> <!-- .img -->
                        
                        <div class="desc">
                            Lorem
                        </div> <!-- .desc -->
                    </figure>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                    <hgroup>
                        <h4>
                            Lorem
                        </h4>
                    </hgroup>
                    
                    <figure>
                        <div class="img">
                            <img 
                                src="images/"
                                width="800"
                                height="600"
                                title=""
                            >
                        </div> <!-- .img -->
                        
                        <div class="desc">
                            Lorem
                        </div> <!-- .desc -->
                    </figure>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                    <hgroup>
                        <h4>
                            Lorem
                        </h4>
                    </hgroup>
                    
                    <figure>
                        <div class="img">
                            <img 
                                src="images/"
                                width="800"
                                height="700"
                                title=""
                            >
                        </div> <!-- .img -->
                        
                        <div class="desc">
                            Lorem
                        </div> <!-- .desc -->
                    </figure>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->

                    <figure>
                        <div class="img">
                            <img 
                                src="images/"
                                width="800"
                                height="300"
                                title=""
                            >
                        </div> <!-- .img -->
                        
                        <div class="desc">
                            Lorem
                        </div> <!-- .desc -->
                    </figure>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
                    
                </div> <!-- .current_project_6 -->
        
            </section> <!-- fifth_section -->
            <!-- ************************************************************************************** Sixth Section End ************ -->
            
        </section>	<!-- .content -->
    
    <div> <!-- .wrapper -->

  </body>

</html>


                    <iframe
                        src="code/" 
                        height="450" 
                        width="800">
                    </iframe>
                    
                    <figure>
                        <div class="img">
                            <img 
                                src="images/"
                                width="800"
                                height="300"
                                title=""
                            >
                        </div> <!-- .img -->
                        
                        <div class="desc">
                            Lorem
                        </div> <!-- .desc -->
                    </figure>
                    
                    <!-- ********************************************************************* Loose Text -->                
                    <div class="loose_text">
                        <p>
                            Lorem
                        </p>
                    </div> <!-- .loose_text -->
                    <!-- ********************************************************************* Loose Text -->
