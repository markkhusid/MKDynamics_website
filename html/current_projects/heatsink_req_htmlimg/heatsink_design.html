<!DOCTYPE HTML">
<HTML>
 <HEAD>
  <TITLE>heatsink_design</TITLE>
  <META NAME="generator" CONTENT="wxMaxima">
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    displayAlign: "left",
    context: "MathJax"
  })
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>
  <link rel="stylesheet" type="text/css" href="heatsink_design_htmlimg/heatsink_design.css"/>
 </HEAD>
 <BODY>

<!-- ***************************************************** -->
<!--          Created with wxMaxima version 15.08.2         -->
<!-- ***************************************************** -->
<noscript><div class="error message">    Please enable JavaScript in order to get a 2d display of the equations embedded in this web page.</div></noscript>\(      \DeclareMathOperator{\abs}{abs}
\)

<!-- Title cell -->


<P CLASS="title">
Raspberry Pi 3 Supercomputer Heatsink Design Calculations
</P>


<!-- Text cell -->


<P CLASS="comment">
In what follows we will perform calculations that will drive the design requirements of the Raspberry Pi 3 supercomputer heatsink.
We will make heavy use of the article at http://www.electronics-cooling.com/2002/05/estimating-temperatures-in-a-water-to-air-hybrid-cooling-system/
to perform these calculations

</P>


<!-- Section cell -->


<P CLASS="section">
 1 Power Supply
</P>


<!-- Section cell -->


<P CLASS="section">
 2 Current Draws
</P>


<!-- Section cell -->


<P CLASS="section">
 3 Temperatures
</P>


<!-- Section cell -->


<P CLASS="section">
 4 Power Consumptions
</P>


<!-- Section cell -->


<P CLASS="section">
 5 Thermal Impedance Estimate of CPU (case to ambient) [deg C/W]
</P>


<!-- Section cell -->


<P CLASS="section">
 6 Thermal Impedance Estimate of CPU (junction to case)
</P>


<!-- Section cell -->


<P CLASS="section">
 7 Thermal Impedance Estimate of CPU (junction to ambient) [deg C/W]
</P>


<!-- Section cell -->


<P CLASS="section">
 8 Calculation of Heatsink Thermal Impdedance Requirements
</P>


<!-- Section cell -->


<P CLASS="section">
 9 Water-cooled Heatsink Design Calculations
</P>


<!-- Text cell -->


<P CLASS="comment">
From http://www.electronics-cooling.com/2002/05/estimating-temperatures-in-a-water-to-air-hybrid-cooling-system/

</P>


<!-- Image cell -->


<P CLASS="image">
Figure 1: /home/mark/Engineering/Supercomputer/Thermal Calcs/water_cooled_heatsink_model.jpg
<BR>
  <IMG src="heatsink_design_htmlimg/heatsink_design_0.png" alt="Diagram" style="max-width:90%;" >

<!-- Text cell -->


<P CLASS="comment">
We will assume that the initial water temperature is 25C [deg C]

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i25) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">T_water_initial</span><span class="code_operator">:</span> <span class="code_number">25</span><span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o25) }\quad 25\]


<!-- Text cell -->


<P CLASS="comment">
We will assume a water cooled heatsink thermal impedance of 0.2C/W [C/W]

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i26) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">R_theta_heatsink_cp</span><span class="code_operator">:</span> <span class="code_number">0</span>.<span class="code_number">2</span><span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o26) }\quad 0.2\]


<!-- Text cell -->


<P CLASS="comment">
The temperature of the CPU according to Equation 1 in the article is: [deg C]

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i27) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">T_CPU_initial</span><span class="code_operator">:</span> (<span class="code_variable">P_RPi3_4_core_heavy_load</span> <span class="code_operator">*</span> <span class="code_variable">R_theta_heatsink_cp</span>) <span class="code_operator">+</span> <span class="code_variable">T_water_initial</span><span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o27) }\quad 25.78\]


<!-- Text cell -->


<P CLASS="comment">
Typical Water Flow Rate [Liters per Hour]

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i28) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">Flow_rate_typ</span><span class="code_operator">:</span> <span class="code_number">50</span><span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o28) }\quad 50\]


<!-- Text cell -->


<P CLASS="comment">
Conversion factor between liter of water to kg of water (at 4C) [L/kg]

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i29) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">Liters_to_kg_water</span><span class="code_operator">:</span> <span class="code_number">1</span><span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o29) }\quad 1\]


<!-- Text cell -->


<P CLASS="comment">
Mass of water flowing past water cooled cold-plate: [kg/s]

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i30) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">M_dot</span><span class="code_operator">:</span> (<span class="code_variable">Flow_rate_typ</span> <span class="code_operator">/</span> <span class="code_variable">Liters_to_kg_water</span>) <span class="code_operator">*</span> (<span class="code_number">1</span><span class="code_operator">/</span><span class="code_number">3600</span>)<span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o30) }\quad \frac{1}{72}\]


<!-- Text cell -->


<P CLASS="comment">
Specific heat of water [J / (kg x deg C)]

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i31) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">C_pw</span><span class="code_operator">:</span> <span class="code_number">4186</span><span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o31) }\quad 4186\]


<!-- Text cell -->


<P CLASS="comment">
Specific Heat Rate of water flowed to cold-plate [J/(sec x deg C)]

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i32) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">C_w</span><span class="code_operator">:</span> <span class="code_variable">M_dot</span> <span class="code_operator">*</span> <span class="code_variable">C_pw</span><span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o32) }\quad \frac{2093}{36}\]


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i33) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_function">float</span>(<span class="code_variable">C_w</span>)<span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o33) }\quad 58.13888888888889\]


<!-- Text cell -->


<P CLASS="comment">
Estimate effectiveness of the heat exchanger: [arb units]

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i42) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">epsilon</span><span class="code_operator">:</span> <span class="code_number">0</span>.<span class="code_number">15</span><span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o42) }\quad 0.15\]


<!-- Text cell -->


<P CLASS="comment">
Calculate Specific Heat Rate of air flowing through heat exchanger:

</P>


<!-- Text cell -->


<P CLASS="comment">
Specific heat of air (at 300K) [J / (kg x deg C)]

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i35) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">C_pa</span><span class="code_operator">:</span> <span class="code_number">1005</span><span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o35) }\quad 1005\]


<!-- Text cell -->


<P CLASS="comment">
Mass flow rate of air past heat exchanger: [cubic feet per minute]

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i36) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">M_dot_air_CFM</span><span class="code_operator">:</span> <span class="code_number">25</span><span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o36) }\quad 25\]


<!-- Text cell -->


<P CLASS="comment">
Mass flow rate of air past heat exchanger: [kg / s]

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i37) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">M_dot_air</span><span class="code_operator">:</span> <span class="code_variable">M_dot_air_CFM</span> <span class="code_operator">*</span> (<span class="code_number">1</span><span class="code_operator">/</span><span class="code_number">60</span>) <span class="code_operator">*</span> (<span class="code_number">1</span>.<span class="code_number">2754</span>) <span class="code_operator">*</span> ((<span class="code_number">0</span>.<span class="code_number">3048</span>)<span class="code_operator">^</span><span class="code_number">3</span>)<span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o37) }\quad 0.01504804422643201\]


<!-- Text cell -->


<P CLASS="comment">
Specific Heat Rate of air flowing through heat exchanger [J / (s x deg C)]:

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i38) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">C_a</span><span class="code_operator">:</span> <span class="code_variable">M_dot_air</span> <span class="code_operator">*</span> <span class="code_variable">C_pa</span><span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o38) }\quad 15.12328444756417\]


<!-- Text cell -->


<P CLASS="comment">
Initial temperature of the air [deg C]

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i39) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">T_air_initial</span><span class="code_operator">:</span> <span class="code_number">25</span><span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o39) }\quad 25\]


<!-- Text cell -->


<P CLASS="comment">
Final temperature of the CPU [deg C]

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i40) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">T_CPU_final</span><span class="code_operator">:</span> <span class="code_variable">P_RPi3_4_core_heavy_load</span> <span class="code_operator">*</span> (<span class="code_variable">R_theta_heatsink_cp</span> <span class="code_operator">+</span> ((<span class="code_number">1</span><span class="code_operator">/</span>(<span class="code_variable">epsilon</span><span class="code_operator">*</span><span class="code_variable">C_a</span>)) <span class="code_operator">-</span> (<span class="code_number">1</span><span class="code_operator">/</span><span class="code_variable">C_w</span>))) <span class="code_operator">+</span> <span class="code_variable">T_air_initial</span><span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o40) }\quad 28.2917241521806\]


<!-- Text cell -->


<P CLASS="comment">
Temperature rise of the CPU [deg C]

</P>


<!-- Code cell -->


<TABLE><TR><TD>
  <SPAN CLASS="prompt">
(%i41) 
  </SPAN></TD>
  <TD><SPAN CLASS="input">
<span class="code_variable">delta_T_CPU_heavy_load_WC</span><span class="code_operator">:</span> <span class="code_variable">T_CPU_final</span> <span class="code_operator">-</span> <span class="code_variable">T_water_initial</span><span class="code_endofline">;</span><span class="code_operator"></span>  </SPAN></TD>
</TR></TABLE>
\[\mathrm{\tt (\%o41) }\quad 3.291724152180599\]

 <HR>
 <SMALL> Created with <A HREF="http://wxmaxima.sourceforge.net/">wxMaxima</A>.</SMALL>
 </BODY>
</HTML>
