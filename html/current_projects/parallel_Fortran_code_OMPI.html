<!DOCTYPE html>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58919029-1', 'auto');
  ga('send', 'pageview');

</script>

<html>

<head>
  <meta content="text/html; charset=utf-8" http-equiv="content-type">
  <meta name="robots" content="follow" />
  
  <title>
    MK Dynamics - Programming - Programming in FORTRAN
  </title>
  
  <link href="../css/styles.css" type = "text/css" rel = "stylesheet" />
  
  <style>
    .content {
	overflow: auto;
	height: 80%; 
	background: url("../images/galaxy1.jpg") no-repeat center center fixed;
	background-size: cover;
	background-position: center;
	padding: 10px;
	margin: 10px;
	border: 5px solid black;
      }
      
    h1, h2, h3, h4 {
      color: white;
      display: block;     
    }
    
    .current_project_1 {
      border		: 5px solid black;
      background	: gray;
      position		: relative;
      width		: 1250px;
      height		: 1050px;
      top		: 0px;
      left		: 0px;
      float		: left;
      margin		: 10px;
      padding-left	: 10px;
    }
    
    .current_project_2 {
      border		: 5px solid black;
      background	: gray;
      position		: relative;
      width		: 1250px;
      height		: 300px;
      top		: 000px;
      left		: 0px;
      float		: left;
      margin		: 10px;
      padding-left	: 10px;
    }
    
    .current_project_3 {
      border		: 5px solid black;
      background	: gray;
      position		: relative;
      width		: 1250px;
      height		: 4300px;
      top		: 000px;
      left		: 0px;
      float		: left;
      margin		: 10px;
      padding-left	: 10px;
    }
    
    .current_project_4 {
      border		: 5px solid black;
      background	: gray;
      position		: relative;
      width		: 1250px;
      height		: 1100px;
      top		: 10px;
      left		: 0px;
      float		: left;
      margin		: 10px;
      padding		: 10px;
    }
    
    .current_project_5 {
      border		: 5px solid black;
      background	: gray;
      position		: relative;
      width		: 1250px;
      height		: 1000px;
      top		: 10px;
      left		: 0px;
      float		: left;
      margin		: 10px;
      padding		: 10px;
    }
    
    .current_project_6 {
      border		: 5px solid black;
      background	: gray;
      position		: relative;
      width		: 1250px;
      height		: 500px;
      top		: 10px;
      left		: 0px;
      float		: left;
      margin		: 10px;
      padding		: 10px;
    }
    
    div .img {
      margin		: 0px;
      padding		: 10px;
      height		: auto;
      width		: auto;
      float		: left;
    }
    
    div .img img {
      display		: inline;
      margin		: 0px;
      padding		: 0px;
    }
    
    div .desc {
      color		: white;
      width		: 600px;
      margin		: 5px;
      padding		: 10px;
    }
    
    ul {
      color		: white;
    }
    
    div .loose_text {
      color		: white;
    }
  </style>
</head>

<body>
  <div class="wrapper">
    <header>
    
      <hgroup>
	<h1> 
	    <big> <big> MK Dynamics </big> </big>
	</h1>


	<h2>
	  Programming - Parallel Fortran Code
	</h2>
      </hgroup>
    

      <nav>
	<ul>
	  <li> <a href="../index.html">Home</a> </li>
	  <li> <a href="rpi3_supercomputer.html">Back</a></li>
	</ul>
      </nav>
  
      <hr />
    
    </header>
    
  

    <section class="content">
    
        <section class="second_section">
        
            <div class="current_project_2">
            
                <hgroup>
                    <h2>
                        Description
                    </h2>
                    
                    <h3>
                        Introduction
                    </h3>
                </hgroup>

                <div class="loose_text">
                    <p>
                        The Open MPI project is an open source implementation of the Message Passing Interface.  The interface is a suite of tools that allow for interprocess communications which facilitate executing portions of a program in parallel.  Detailed discussions on the the Message Passing Interface (MPI) can be found here: <br>
                        <a href="http://condor.cc.ku.edu/~grobe/docs/intro-MPI.shtml">http://condor.cc.ku.edu/~grobe/docs/intro-MPI.shtml</a><br>
                        <br>
                        Details on OpenMPI can be found here:<br>
                        <a href="https://www.open-mpi.org">https://www.open-mpi.org</a><br>
                    </p>
                </div> <!-- .loose-text -->
	

            </div> <!-- .current_project_2 -->
            
        </section> <!-- second_section --> 
    

        <section class="third_section">
    
            <div class="current_project_3">
                <hgroup>
                    <h2>
                        Simple Program to Demonstrate Parallel Programming using OpenMPI
                    </h2>
                </hgroup>
                
                <div class="loose_text">
                    <p>
                        We start by installing OpenMPI, which can be downloaded here:<br>
                        <a href="https://www.open-mpi.org/software/ompi/v1.8">https://www.open-mpi.org/software/ompi/v1.8</a><br>
                        <br>
                        At the time of this writing, version 2.0.0 is NOT supported by our IDE, called Eclipse NEON.  Rather, version 1.8.8 needs to be downloaded and installed.  Our targer system is an Intel quad-core I7 processor, running Fedora 23 Linux (64 bit version).  This detail will become important as we delve deeper into the actual mechanisms of execution.  This type of processor should be general enough for most cases.
                    </p>
                    
                    <p>
                        Once the tarball has been decompressed, it is important to adjust the LD_LIBRARY_PATH environment variable to point to the proper location, otherwise, there will be much grief during linking and running the generated executables.  This variable must be properly set prior to installing OpenMPI because directories are actually hardcoded into installation at build time.  In my system, I found the following to work properly:<br>
                        <br>
                    </p>
                </div> <!-- .loose_text -->
                
                <div class="img">
                    <img
                        src="images/LD_LIBRARY_PATH.jpeg"
                        width="1200px"
                        height="600px"
                        title="LD_LIBRARY_PATH.jpeg"
                    >
                </div> <!-- .img -->
            
                <div class="loose_text">
                    <p>
                        Then from the install directory that contains the decompressed installation files, it is required to do a ./configure --with-devel-headers.  The --with-devel-headers switch will install additional files required by the Eclipse IDE to properly work with the OpenMPI modules.<br>
                    </p>
                </div> <!-- .loose_text -->

                <div class="img">
                    <img
                        src="images/dot_slash_configure.jpeg"
                        width="1200px"
                        height="600px"
                        title="dot_slash_configure.jpeg"
                    >
                </div> <!-- .img -->
                
                <div class="loose_text">
                    <p>
                        The configuration script will perform a series of systems tests and setup the make files for a system specific build.  Generally, the configuration takes a few minutes and completes with no issues.  Once the configuration is complete, we are now ready to perfom the install, which will build the system specific executables and libraries.<br>  This can be accomplished by entering: sudo make -j 4 install all<br>
                    </p>
                </div> <!-- .loose_text -->
                
                <div class="img">
                    <img
                        src="images/make_install_all.jpeg"
                        width="1200px"
                        height="600px"
                        title="make_install_all.jpeg"
                    >
                </div> <!-- .img -->
                
                <div class="loose_text">
                    <p>
                        The sudo is required because the libraries and executables need to be installed as root.  The -j 4 switch causes make to use all four cores to person the build, greatly speeding up the process.  It takes a about 5 minutes on this Intel I7 3GHz processor.<br>
                    </p>
                    
                    <p>
                        Once the installation has completed, it's status can be viewed by typing ompi_info at the command prompt.<br>
                    </p>
                </div> <!-- .loose_text -->
                
                <div class="img">
                    <img
                        src="images/ompi_info.jpeg"
                        width="1200px"
                        height="600px"
                        title="ompi_info.jpeg"
                    >
                </div> <!-- .img -->
                
                <div class="loose_text">
                    <p>
                        A full listing of the output of ompi_info is shown below:
                    </p>
                </div> <!-- .loose_text -->
                
                <iframe
                        src = "Fortran_OMPI/ompi_info.txt"
                        width = "1200"
                        height = "800"
                        frameborder = "1"
                        scrolling = "yes">
                </iframe>
                
                <div class="loose_text">
                    <p>
                        Notice that the version of Open MPI is 1.8.8.  At the time of this writing, this version is known to work with the Eclipse IDE + Photran + Parallel Tools Platform.  In the author's understanding, version 2.0.0 is known to NOT work.
                    </p>
                    
                    <p>
                        It was found that if, after compilation and exectution of source code, that error messages are displayed pertaining to MPI or MCA, a working remedy is to ensure that the LD_LIBRARY_PATH environment variable is properly set, and then to reconfigure and rebuild the OpenMPI installation files as described above.  If problems persist, another thing to try is to rename the folder /usr/local/lib/openmpi to /usr/local/lib/openmpi_backup, and then perform a ./configure --with-devel-headers and then a sudo make -j 4 install all.  This will ensure that fresh files are installed into /usr/local/lib/openmpi.
                    </p>
                </div> <!-- .loose_text -->
                
            </div> <!-- .current_project_3 -->
        
        </section> <!-- .third_section -->

<!--***************************************************************************************************** -->        
        
        <section class="fourth_section">
    
            <div class="current_project_4">
                <hgroup>
                
                    <h2>
                        Program Run - Simple Program to Compute Positive and Negative Averages
                    </h2>
                    
                </hgroup>
                
                <div class="img">
                    <img 
                        src="images/parallel_fortran_code_run1.jpeg"
                        width="1200"
                        height="800"
                        title="parallel_fortran_code_run1.jpeg"
                    >
                </div> <!-- .img -->
            
                <div class="loose_text">

                </div> <!-- .loose_text -->

            </div> <!-- .current_project_4 -->
            
        </section> <!-- .fourth_section -->

<!-- ********************************************************************************************************* -->
    
        <section class="fifth_section">
        
            <div class="current_project_5">
            
                <hgroup>
                    <h2>
                        Program - Simple Program to Calculate Integrals via Trapezoidal Sums
                    </h2>
                </hgroup>
                
                <a href="http://www.g95.org/coarray.shtml">www.g95.org</a>
                <div class="img">
                    <img 
                    src="images/fortran_code_integrate.jpeg"
                    width="1200"
                    height="800"
                    title="fortran_code_integrate.jpeg"
                    >
                </div> <!-- .img -->
                
                <div class="loose_text">
                    The function that is integrated is x^2, and it is hardcoded in.  The limits of integration are 0 to 1.  The program makes use of a module to define the function to integrate, and then this function acts a parameter for the integrate function.  The function interface is defined in the integrate_module. <br>
                    <a href="code_fortran/integrate.f95">Download integrate.f95 code</a>
                </div> <!-- .loose_text -->

            </div> <!-- .current_project_5 -->
      
        </section> <!-- .fifth_section -->
    
        <section class="sixth_section">
        
            <div class="current_project_6">
            
                <hgroup>
                    <h2>
                        Program Run - Simple Program to Calculate Integrals via Trapezoidal Sums
                    </h2>
                </hgroup>
                
                <div class="img">
                    <img 
                    src="images/fortran_code_integrate_output.jpeg"
                    width="1200"
                    height="300"
                    title="fortran_code_integrate_output.jpeg"
                    >
                </div> <!-- .img -->
                
                <div class="loose_text">
                    The integral of y=x^2 from x=0 to x=1 is 1/3.   
                </div> <!-- .loose_text -->

            </div> <!-- .current_project_6 -->
      
        </section> <!-- .sixth_section -->
    
     </section>	<!-- .content -->
    
  </div> <!-- .wrapper -->

  </body>

</html>
  

